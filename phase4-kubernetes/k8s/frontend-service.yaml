# =============================================================================
# Kubernetes Service - Frontend
# Exposes frontend pods within the cluster
# =============================================================================

apiVersion: v1
kind: Service
metadata:
  name: frontend-service
  namespace: default
  labels:
    app: todo-application
    component: frontend
spec:
  # Service type: NodePort (accessible from host on Minikube)
  type: NodePort

  # Selector to match frontend pods
  selector:
    app: todo-application
    component: frontend

  # Ports configuration
  ports:
    - name: http
      protocol: TCP
      port: 3000          # Service port (internal)
      targetPort: http    # Container port name
      nodePort: 30080     # External port (30000-32767 range)
      # Alternative: targetPort: 3000

  # Session affinity (optional)
  sessionAffinity: None

---
# =============================================================================
# Usage Instructions
# =============================================================================
#
# Apply service:
#   kubectl apply -f frontend-service.yaml
#
# Check status:
#   kubectl get service frontend-service
#   kubectl describe service frontend-service
#
# Get service URL (Minikube):
#   minikube service frontend-service --url
#
# Test connectivity from within cluster:
#   kubectl run -it --rm debug --image=alpine --restart=Never -- sh
#   wget -qO- http://frontend-service:3000
#
# View endpoints:
#   kubectl get endpoints frontend-service
#
# =============================================================================
